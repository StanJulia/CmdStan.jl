######### CmdStan program example  ###########

using StanDump

ProjDir = dirname(@__FILE__)
cd(ProjDir) #do

  bernoullimodel = "
  data { 
    int<lower=1> N; 
    int<lower=0,upper=1> y[N];
  } 
  parameters {
    real<lower=0,upper=1> theta;
  } 
  model {
    theta ~ beta(1,1);
    y ~ bernoulli(theta);
  }
  ";

  data = [
    Dict("N" => 10, "y" => [0, 1, 0, 1, 0, 0, 0, 0, 0, 1]),
    Dict("N" => 10, "y" => [0, 1, 0, 0, 0, 0, 1, 0, 0, 1]),
    Dict("N" => 10, "y" => [0, 0, 0, 0, 0, 0, 1, 0, 1, 1]),
    Dict("N" => 10, "y" => [0, 0, 0, 1, 0, 0, 0, 1, 0, 1])
  ]

  tmpdir = mktempdir()
  
  for i in 1:length(data)
    stan_dump(joinpath(tmpdir, "test_$i.R"), data[i])
  end
  
  run(`cat $tmpdir"/test_1.R"`)
  
#end # cd
